 -----
 Spring Json View
 -----
 Kai Ulrich
 -----

Validation

 The Validation of a POST request is very easy. Just register  a validator the spring way.
 Spring json view adds the fielderror to the response json string. 


* Validator
~~~~~~~~~~~~~~~~~~~

 Write your validator class by implementing the Validator-Interface. 

+-------------------------------------------------------+
 
 public class SpringJsonValidator implements Validator {
    
    public void validate(Object obj, Errors errors) {
    	SpringJsonForm form = (SpringJsonForm) obj;
    	if (form.getPlaceofbirth() == null || "".equals(form.getPlaceofbirth())) {
            errors.rejectValue("placeofbirth", "error.no.placeofbirth", null, "Placeofbirth required.");
        }
       
    }
    
    @Override
    public boolean supports(Class clazz) {
        return SpringJsonForm.class.equals(clazz);
    }
 }
+-------------------------------------------------------+


* Spring ApplicationContext 
~~~~~~~~~~~~~~~~~~~
 
 Configurate the SimpleFormController by adding the validator.
 
+-------------------------------------------------------+
<beans>    
    <bean name="simpleJsonPostFormController" 
	      class="org.thing.spring.json.controller.SimpleJsonPostFormController">
        <property name="commandClass">
             <value>org.thing.spring.json.controller.SpringJsonForm</value>
        </property>
        <property name="formView"><value>jsonView</value></property>
        <property name="successView"><value>jsonView</value></property>
        <property name="validator"><ref bean="validator"/></property>
    </bean>
    <bean name="validator" class="org.thing.spring.json.controller.SpringJsonValidator"/>
</beans>
+-------------------------------------------------------+


* {Result}
~~~~~~~~~~~~~~~~~~~

 Spring Json-View added the fielderror to the json response. 
 
+-------------------------------------------------------+
{"command":{
            "birthday":"08-02-2008",
            "placeofbirth":""
           },
 "failure":"true",
 "hasGlobalErrors":"false",
 "hasFieldErrors":"true",
 "fielderrors":{
            "placeofbirth":"Please enter a a place of birth!"
}}
+-------------------------------------------------------+
    